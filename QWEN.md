# QWEN.md - AI开发入口

此文件作为所有AI工具理解和管理本项目的主要入口点。所有AI辅助开发都应首先参考此文档。文档优先于实现。


## 用中文沟通!!


## 项目概述

**项目名称:** Example4CadQuery
**目的:** 用于学习CadQuery的练习项目，CadQuery是一个用于参数化CAD建模的Python库
**管理工具:** uv (Python包管理器和环境管理器)

## 开发环境设置

### 前置要求
- 安装 `uv` 包管理器
- 网络连接以下载依赖

### 设置命令
```bash
# 使用uv安装Python
uv python install

# 初始化项目环境并安装依赖
uv sync
```

## 项目结构

```
Example4CadQuery/
├── QWEN.md              # AI开发入口（本文件）
├── README.md            # 通用项目文档（中英双语）
├── pyproject.toml       # 项目配置和依赖
├── hello.py            # 示例/起始文件
├── .gitignore          # Git忽略规则
├── .python-version     # Python版本规范
├── .venv/              # 虚拟环境（由uv管理）
├── docs/               # 文档管理目录
├── app/                # 项目代码管理目录
└── tests/              # 测试代码目录
    └── output/         # 测试输出目录（不纳入git管理）
```

## 项目管理办法

### 目录结构规范
- **docs/**: 文档管理目录，存放项目相关文档
- **app/**: 项目代码管理目录，存放主要功能代码
- **tests/**: 测试代码目录，存放项目测试用例
  - **tests/output/**: 测试输出目录，**不纳入git管理**

### 模块一致性原则
- docs、app、tests 目录在代码模块结构上尽量保持一致
- 相同功能模块在三个目录中应有对应的组织结构
- 便于文档、代码、测试的对应管理和维护

### 测试驱动开发
- 项目很多代码的允许是通过测试用例的方式给出的
- tests/output 目录用于存放测试运行产生的输出文件
- 该目录不纳入版本控制，避免临时文件污染代码库
- 简单的测试就不要专门写一个python脚本，直接用shell包装一个python命令


## 开发指南

### 文档优先
- 所有更改都应首先记录文档
- 添加新主要组件或更改项目结构时更新QWEN.md
- README.md和其他面向用户的文档应保持中英双语

### 代码标准
- 遵循Python PEP 8风格指南
- 使用CadQuery最佳实践进行CAD建模
- 用清晰的解释注释复杂的CAD操作


### AI助手指令

### 在此项目上工作时
1. **始终先阅读QWEN.md** 然后再进行任何更改
2. **参考项目结构** 并保持一致性
3. **更新文档** 然后再实现新功能
4. **使用uv命令** 进行任何依赖管理
5. **README.md需要保持中英双语**，但QWEN.md仅使用中文
6. **遵守项目管理办法**，保持docs、app、tests目录结构一致性
7. **所有规则、规矩、管理办法内容都记录到QWEN.md中**
8. **快速开始原则**：加载@QWEN.md时不要扫描整个项目，应边看边理解，提高效率


### 关键命令
```bash
uv sync          # 安装/更新依赖
uv run <script>  # 在项目环境中运行Python脚本
uv add <package> # 添加新依赖
```

## 项目目标

- 通过实际示例学习和练习CadQuery
- 构建参数化CAD模型集合
- 建立AI辅助CAD开发的最佳实践
- 为未来CadQuery项目创建模板

## 项目进展总结

### 已完成工作
- **项目结构**: 建立 docs、app、tests、output 目录结构
- **官方文档**: 整理 CadQuery 核心概念、vs OpenSCAD 对比、设计理念、示例实践和功能速查表
- **示例实现**: 复刻官方 QuickStart 轴承座示例，支持参数化设计
- **可视化**: 实现 `show()` 函数 3D 查看功能
- **多模式运行**: 支持导出文件、查看模型、混合模式
- **模块化**: 创建 app/quickstart 模块，支持导入和直接运行
- **直齿轮建模**: 完成参数化直齿轮建模，实现真正的渐开线齿形，符合ISO标准


### 技术验证
验证了 CadQuery 核心功能：工作平面、选择器、几何操作、布尔运算、链式调用、参数化设计、多格式导出、3D 可视化。

### 文件产出
- **代码**: bearing_block.py、visualization_example.py、__init__.py、app/gears/spur_gear.py
- **文档**: cadquery-official-docs.md、cadquery-concepts.md、build-gears-with-cadquery.md、QWEN.md、README.md  
- **输出**: bearing_block.stl、.dxf、.step、output/gears/*.stl

### 后续计划
- 扩展更多官方示例
- 添加核心功能练习
- 建立测试用例
- 考虑扩展到斜齿轮、伞齿轮等其他齿轮类型
- 进一步优化现有直齿轮建模的精度和功能


## 项目发展变更记录

### 2025-08-06
- **项目初始化**: 创建 Example4CadQuery 项目，用于学习CadQuery
- **建立项目管理办法**: 设定docs、app、tests目录结构规范
- **制定模块一致性原则**: 要求三个目录在代码模块结构上保持一致
- **确立测试驱动开发模式**: tests/output目录不纳入git管理
- **建立规则记录机制**: 所有规则、规矩、管理办法内容记录到QWEN.md中
- **整理CadQuery官方文档**: 创建统一的官方文档整理文件，包含简介、vs OpenSCAD对比、设计理念、示例实践和功能速查表
- **复刻官方QuickStart示例**: 成功创建轴承座模型，导出STL、DXF、STEP三种格式文件
- **规范文件组织**: 建立output目录结构，将导出文件统一管理，标记官方第一个例子，更新文档记录
- **建立quickstart代码模块**: 创建app/quickstart模块，实现模块化组织，支持导入和直接运行
- **发现可视化查看方法**: 找到使用 `show()` 函数一行命令打开3D查看窗口的方法，创建可视化示例
- **增强第一个例子**: 为轴承座示例添加可视化查看支持，提供多种运行模式（导出、查看、同时进行）
- **完成项目进展总结**: 系统总结已完成的核心工作、技术成果、开发模式验证和后续发展方向，项目已推送到 GitHub
- **专题研究准备**: 整理齿轮类型和标准概述文档，为后续齿轮建模专题做准备

### 2025-08-07
- **直齿轮建模完成**: 实现参数化直齿轮建模，支持真正的渐开线齿形，符合ISO标准
- **核心代码**: 创建 `app/gears/spur_gear.py`，单一文件实现完整功能
- **项目结构简化**: 从多个文件简化为单一核心实现文件
- **渐开线修复**: 解决齿轮形状和齿形问题，实现真正的渐开线曲线齿形
- **详细记录**: 齿轮建模的详细过程和技术细节记录在 `docs/build-gears-with-cadquery.md` 中

---

**最后更新:** 2025-08-07

**维护者:** AI助手与人工监督

---

## 规则记录说明

本文件用于记录项目的所有规则、规矩和管理办法。后续任何新增或修改的规则内容都将记录在此文件的相应章节中，确保项目管理的统一性和可追溯性。